{% extends "base.jinja2" %}
{% block body %}
  <hr>
  <h2 id="gallery">Entries</h2>
  <hr>
  <br>
{% if request.authenticated_userid %}
<div id="new_post">
<h3 id="post">Write a new entry!</h3>
<aside>
<form action="" method="POST" class="add_entry" id="add_entry">
  <div class="field">
    <label for="title" class="form_field">Title:</label><br>
    <textarea name="title" id="title" rows="1" cols="30"></textarea>
  </div>
  <br>
  <div class="field">
    <label for="text" class="form_field">Text:</label><br>
    <textarea name="text" id="text" rows="5" cols="60"></textarea>
  </div>
  <div class="control_row">
    <input type="submit" value="Share" name="Share"/>
  </div>
</form>
</aside>
</div>
{% endif %}
<div id="all_posts">
  {% for entry in entries %}
    <article class="entry" id="entry{{entry.id}}">
          <a href ="/detail/{{entry.id}}">
            <h3>{{ entry.title }}</h3>
          </a>
            <div class="post">
            <a href ="/detail/{{entry.id}}">
              <p class="dateline">{{ entry.created.strftime('%b. %d, %Y') }}</p>
              <div class="entry_body" id ="detail_post">
                {{ entry.text|markdown|safe }}
              </div>
            </a>
            </div>
          </a>
    </article>
    <div style="text-align:center" class="twitter">
    <a href="https://twitter.com/share" class="twitter-share-button" data-text="New Blog Post: {{entry.title}}" data-via="BeckerCommaNick" data-size="large" data-dnt="true">Tweet</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
    </div>
  {% else %}
  <div class="entry">
    <p><em>No entries here so far</em></p>
  </div>
  {% endfor %}
  </div>
{% endblock %}
